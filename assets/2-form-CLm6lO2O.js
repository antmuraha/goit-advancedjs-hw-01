var D=t=>{throw TypeError(t)};var C=(t,s,e)=>s.has(t)||D("Cannot "+e);var f=(t,s,e)=>(C(t,s,"read from private field"),e?e.call(t):s.get(t)),h=(t,s,e)=>s.has(t)?D("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,e),E=(t,s,e,a)=>(C(t,s,"write to private field"),a?a.call(t,e):s.set(t,e),e);import{g as O}from"./_commonjsHelpers-B-UnjaXt.js";var y={exports:{}},j=y.exports,F;function k(){return F||(F=1,function(t,s){(function(e,a){t.exports=a()})(j,function(){var e={position:"top-right",message:function(a,r,m){var r=r||"success",m=m||3e3,l=l||{},v=document.getElementsByClassName("toast").length,u=document.createElement("div");u.classList.add("toast",r);var i=document.createElement("span");i.classList.add("text"),i.innerText=a,u.appendChild(i);var o=document.createElement("span");if(o.classList.add("icon"),o.innerHTML=this.getIcon(r),u.addEventListener("click",function(b){document.getElementById("toast-wrap").removeChild(u),clearTimeout(l[v])}),u.appendChild(o),document.getElementById("toast-wrap"))document.getElementById("toast-wrap").appendChild(u);else{var c=document.createElement("div");c.id="toast-wrap",c.classList.add("toast-wrap",this.position),c.appendChild(u),document.body.appendChild(c)}l[v]=setTimeout(function(){document.getElementById("toast-wrap").removeChild(u),document.getElementsByClassName("toast")[0]||(l=void 0,document.body.removeChild(document.getElementById("toast-wrap")))},m)},setPosition:function(a){this.position=a},getIcon:function(a){var n="";switch(a){case"success":n="&#10004;";break;case"error":n="&#x2715;";break;case"info":n="&#8505;";break;case"warning":n="&#9888;";break}return n}};return e})}(y)),y.exports}var x=k();const w=O(x);var p,g;class I{constructor(s,e){h(this,p);h(this,g);E(this,p,s==="local"?localStorage:sessionStorage),E(this,g,e)}save(s){const e=new FormData(s),a=Object.fromEntries(e.entries()),n={};for(const[d,r]of Object.entries(a))typeof r=="string"?n[d]=r.trim():console.warn(`Value for ${d} is not a string:`,r);f(this,p).setItem(f(this,g),JSON.stringify(n))}get(){const s=f(this,p).getItem(f(this,g));if(!s)return new FormData;try{const e=JSON.parse(s),a=new FormData;for(const[n,d]of Object.entries(e))a.append(n,d);return a}catch(e){console.error("Error parsing JSON",e)}return new FormData}clean(){f(this,p).removeItem(f(this,g))}}p=new WeakMap,g=new WeakMap;function L(t,s){let e=!0;const a=Object.fromEntries(s.entries());for(const[n,d]of Object.entries(a)){const r=t.querySelector(`[name="${n}"]`),m="required"in(r==null?void 0:r.dataset);r&&m&&"value"in r&&!d&&(e=!1)}return e}function A(t,s){const e=s.get(),a=Object.fromEntries(e.entries());for(const[n,d]of Object.entries(a)){const r=t.querySelector(`[name="${n}"]`);r&&"value"in r&&(r.value=d)}}function S(t){if(!t){console.error("Form not found");return}const s=t.getAttribute("action"),e=t.getAttribute("method"),a=t.getAttribute("enctype")||"multipart/form-data",n=t.getAttribute("data-validate-message")||"Please fill out this field",d=t.getAttribute("data-autosave")==="true",r=t.getAttribute("data-storage-type"),m=t.getAttribute("data-restore-key")||"form-data";if(!s){console.error("Form action not found");return}if(!e){console.error("Form method not found");return}const l=new I(r,m);A(t,l);function v(i,o=!1){o&&i.reset()}v(t);function u(i){w.message("Form submitted successfully");const o=new FormData(i),c=Object.fromEntries(o.entries());console.log("Form Data",c),l.clean(),v(i,!0)}t.addEventListener("submit",async i=>{i.preventDefault();const o=new FormData(t);if(!L(t,o)){w.message(n);return}try{(await fetch(s,{method:e,body:o,headers:{"Content-Type":a}})).ok&&u(t)}catch(c){console.log("Simulating successful data submission:",c),u(t)}}),t.addEventListener("input",i=>{var c,b;const o=i.target;if(!(o instanceof HTMLInputElement)&&!(o instanceof HTMLTextAreaElement)){console.error("Input not found or does not support validity");return}(c=o==null?void 0:o.validity)!=null&&c.valid?(o.setCustomValidity(""),o.classList.remove("error")):(b=o==null?void 0:o.validity)!=null&&b.typeMismatch?(o.setCustomValidity(""),o.value?o.classList.add("error"):o.classList.remove("error")):o.setCustomValidity(""),o.getAttribute("name"),o.value,d&&l.save(t)})}S(document.querySelector(".feedback-form"));w.message("Please fill out the feedback form");
